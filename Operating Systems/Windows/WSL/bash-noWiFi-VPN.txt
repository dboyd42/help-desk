Bash Loses Network Connectivity Once Connected to a VPN
#######################################################
:Status: MITAGATED
:Mitigation: Works per session basis
:Issue: The file auto-regenerates during each session initiation
:URL: https://docs.microsoft.com/en-us/windows/wsl/troubleshooting

Mitigation Actions Performed
=============================
:KEYWORD: NAMESERVER
:DNS-Pi.Hole: 192.168.1.254
:DNS-Google: 8.8.8.8

..code-block CMD

	# Get DNS address
	ipconfig /all                   // Wireless LAN adapter Wi-Fi > DNS Servers

.. code-block Bash

	# Replace resolv.conf>nameserver_addr to ipconfig>DNS_addr
	vim /etc/resolv.con
		line 4:W<S-c><newDNS_addr>

Explanation
===========

If after connecting to a VPN on Windows, bash loses network connectivity, try
this workaround from within bash. This workaround will allow you to manually
override the DNS resolution through /etc/resolv.conf.

1.	Take a note of the DNS server of the VPN from doing ipconfig.exe /all
2.	Make a copy of the existing resolv.conf sudo cp /etc/resolv.conf
    /etc/resolv.conf.new
3.	Unlink the current resolv.conf sudo unlink /etc/resolv.conf
4.	sudo mv /etc/resolv.conf.new /etc/resolv.conf
5.	Open /etc/resolv.conf and
	a. Delete the first line from the file, which says "# This file was
	   automatically generated by WSL. To stop automatic generation of this
	   file, remove this line.".
	b. Add the DNS entry from (1) above as the very first entry in the list
	   of DNS servers.
	c. Close the file.

Once you have disconnected the VPN, you will have to revert the changes to
/etc/resolv.conf. To do this, do:

1.	cd /etc
2.	sudo mv resolv.conf resolv.conf.new
3.	sudo ln -s ../run/resolvconf/resolv.conf resolv.conf

